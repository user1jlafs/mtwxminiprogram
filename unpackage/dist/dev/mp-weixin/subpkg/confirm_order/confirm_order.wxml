<view class="container"><view class="address-section"><view class="section-title-box"><view class="section-title"><text>收货地址</text></view><view class="tea-decoration"></view></view><view class="delivery-options"><view data-event-opts="{{[['tap',[['selectPickupMethod',['self']]]]]}}" class="{{['option-item',(pickupMethod==='self')?'active':'']}}" bindtap="__e"><view class="option-icon"><view class="{{['option-circle',(pickupMethod==='self')?'active':'']}}"></view></view><text class="option-text">自提</text><view class="option-tag">自提</view></view><view data-event-opts="{{[['tap',[['selectPickupMethod',['delivery']]]]]}}" class="{{['option-item',(pickupMethod==='delivery')?'active':'']}}" bindtap="__e"><view class="option-icon"><view class="{{['option-circle',(pickupMethod==='delivery')?'active':'']}}"></view></view><text class="option-text">外送</text></view></view><block wx:if="{{pickupMethod==='self'}}"><view class="pickup-info"><view class="pickup-time-box"><uni-icons vue-id="f78b8fa8-1" type="clock" size="16" color="#8B5A2B" bind:__l="__l"></uni-icons><text class="pickup-time">立即自取，约01:05可取</text></view><text class="pickup-desc">金牌奶茶师正在等待你下单</text></view></block><block wx:if="{{pickupMethod==='delivery'}}"><view class="address-form"><block wx:if="{{$root.g0>0}}"><view data-event-opts="{{[['tap',[['showAddressList',['$event']]]]]}}" class="use-saved-address" bindtap="__e"><block wx:if="{{selectedAddress}}"><view class="saved-address-info"><view class="address-user-info"><text class="address-name">{{selectedAddress.name}}</text><text class="address-phone">{{selectedAddress.phone}}</text><block wx:if="{{selectedAddress.isDefault}}"><view class="default-tag">默认</view></block></view><view class="address-detail"><uni-icons vue-id="f78b8fa8-2" type="location" size="16" color="#8B5A2B" bind:__l="__l"></uni-icons><text>{{selectedAddress.province+selectedAddress.city+selectedAddress.district+selectedAddress.detailAddress}}</text></view></view></block><block wx:else><view class="no-address-tip"><text>请选择收货地址</text></view></block><uni-icons vue-id="f78b8fa8-3" type="right" size="16" color="#C39B77" bind:__l="__l"></uni-icons></view></block><block wx:else><view class="address-input-form"><view class="form-item"><text class="form-label">收货人</text><input class="form-input" type="text" placeholder="请输入收货人姓名" data-event-opts="{{[['input',[['__set_model',['$0','name','$event',[]],['addressForm']]]]]}}" value="{{addressForm.name}}" bindinput="__e"/></view><view class="form-item"><text class="form-label">手机号码</text><input class="form-input" type="number" placeholder="请输入手机号码" maxlength="11" data-event-opts="{{[['input',[['__set_model',['$0','phone','$event',[]],['addressForm']]]]]}}" value="{{addressForm.phone}}" bindinput="__e"/></view><view class="form-item"><text class="form-label">所在地区</text><view data-event-opts="{{[['tap',[['showRegionPicker',['$event']]]]]}}" class="region-picker" bindtap="__e"><block wx:if="{{addressForm.province}}"><text>{{addressForm.province+" "+addressForm.city+" "+addressForm.district}}</text></block><block wx:else><text class="placeholder">请选择所在地区</text></block><uni-icons vue-id="f78b8fa8-4" type="right" size="14" color="#C39B77" bind:__l="__l"></uni-icons></view></view><view class="form-item"><text class="form-label">详细地址</text><textarea class="form-textarea" placeholder="请输入详细地址信息，如道路、门牌号、小区、楼栋号、单元等" data-event-opts="{{[['input',[['__set_model',['$0','detailAddress','$event',[]],['addressForm']]]]]}}" value="{{addressForm.detailAddress}}" bindinput="__e"></textarea></view><view class="form-item switch-item"><text class="form-label">设为默认地址</text><switch checked="{{addressForm.isDefault}}" color="#8B5A2B" data-event-opts="{{[['change',[['toggleDefaultAddress',['$event']]]]]}}" bindchange="__e"></switch></view></view></block></view></block></view><view class="product-section"><view class="section-header"><view class="section-title-box"><text class="section-title">已选商品</text></view><view class="bubble-decoration"></view></view><view class="product-list"><block wx:for="{{cartProducts}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="product-item"><image class="product-image" src="{{item.image}}" mode="aspectFill"></image><view class="product-info"><view class="product-name-box"><text class="product-name">{{item.name}}</text><block wx:if="{{item.isSpecial}}"><view class="product-special"><text>特惠价</text></view></block></view><text class="product-spec">{{item.specification}}</text><view class="product-price-box"><text class="product-price">{{"¥"+item.price}}</text><block wx:if="{{item.originalPrice}}"><text class="product-original">{{"¥"+item.originalPrice}}</text></block><text class="product-count">{{"x"+item.count}}</text></view></view></view></block></view><view class="remark-section"><view data-event-opts="{{[['tap',[['showRemarkPopup',['$event']]]]]}}" class="remark-header" bindtap="__e"><view class="remark-left"><uni-icons vue-id="f78b8fa8-5" type="compose" size="16" color="#8B5A2B" bind:__l="__l"></uni-icons><text>备注特殊要求</text></view><uni-icons vue-id="f78b8fa8-6" type="right" size="14" color="#C39B77" bind:__l="__l"></uni-icons></view></view><view class="tips-section"><view class="tips-icon"><uni-icons vue-id="f78b8fa8-7" type="info" size="16" color="#C39B77" bind:__l="__l"></uni-icons></view><text class="tips-text">温馨提示：建议收到高温量，社交距离，本店仅支持电子支付，订单完成后可前往发票管理中开具。</text></view></view><view class="payment-section"><view class="section-title-box"><view class="section-title"><text>支付方式</text></view><view class="tea-decoration"></view></view><view class="payment-option"><view class="payment-left"><image class="payment-icon" src="/static/wechat-pay.png" mode="aspectFit"></image><text class="payment-name">微信支付</text></view><uni-icons vue-id="f78b8fa8-8" type="right" size="14" color="#999" bind:__l="__l"></uni-icons></view></view><view class="pickup-section"><view class="section-title-box"><view class="section-title"><text>取餐方式</text></view><view class="tea-decoration"></view></view><view class="pickup-options"><view data-event-opts="{{[['tap',[['selectDineMethod',['store']]]]]}}" class="{{['pickup-option',(dineMethod==='store')?'active':'']}}" bindtap="__e"><view class="option-icon"><view class="{{['option-circle',(dineMethod==='store')?'active':'']}}"></view></view><text class="option-text">店内用餐</text></view><view data-event-opts="{{[['tap',[['selectDineMethod',['takeout']]]]]}}" class="{{['pickup-option',(dineMethod==='takeout')?'active':'']}}" bindtap="__e"><view class="option-icon"><view class="{{['option-circle',(dineMethod==='takeout')?'active':'']}}"></view></view><text class="option-text">自提带走</text></view></view></view><view class="footer"><view class="total-price"><text class="price-label">应付</text><text class="price-value">{{"¥"+totalPrice}}</text></view><view class="total-detail"><uni-icons vue-id="f78b8fa8-9" type="gift" size="14" color="#C39B77" bind:__l="__l"></uni-icons><text>{{"总计优惠 ¥"+discount}}</text></view><view data-event-opts="{{[['tap',[['submitOrder',['$event']]]]]}}" class="pay-btn" bindtap="__e"><uni-icons vue-id="f78b8fa8-10" type="wallet" size="16" color="#FFFFFF" bind:__l="__l"></uni-icons><text>去支付</text></view></view></view>